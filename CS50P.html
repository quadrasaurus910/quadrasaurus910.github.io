<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS50P Animated Background</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Load Inter for the font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');

        /* Custom style for the linear gradient background - tightened transition */
        body {
            font-family: 'Inter', sans-serif;
            /* Tighter gradient transition between 30% and 70% */
            background: linear-gradient(135deg, #50CDF9 30%, #FFE600 70%);
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .content-wrapper {
            width: 90%;
            height: 90%;
            max-width: 1200px;
            max-height: 800px;
            display: flex;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        /* --- CS50P Animation Container (Left Side) --- */
        #animation-container {
            position: relative;
            width: 50%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-start; 
            align-items: flex-start;
            padding-top: 15vh;
        }

        /* Base style for the ghosting text */
        .ghost-text {
            position: absolute;
            white-space: nowrap;
            font-weight: 500;
            font-size: clamp(3rem, 15vw, 6rem); 
            color: #000000;
            /* IMPORTANT: Use transition: none to ensure instantaneous "pop" effect */
            transition: none;
        }

        /* --- Overlay Text Container (Right Side) --- */
        .overlay-text {
            width: 50%;
            padding: 2rem;
            color: #1a1a1a;
            font-family: 'Inter', sans-serif; 
            font-weight: 700;
        }

        .overlay-text h1 {
            font-size: clamp(1.5rem, 4vw, 3rem);
            margin-bottom: 0.5rem;
            font-weight: 900;
            line-height: 1.2;
            color: #1a1a1a;
        }
    </style>
</head>
<body>

    <div class="content-wrapper">
        <div id="animation-container">
            <!-- Ghost text will be injected here by JavaScript -->
        </div>

        <div class="overlay-text">
            <h1>Introduction to Programming</h1>
            <h1>with Python</h1>
        </div>
    </div>

    <script>
        const animationContainer = document.getElementById('animation-container');
        const textToAnimate = "CS50P";
        const numVisibleCopies = 4; // Total number of lines in the stack
        const opacityDrop = 0.20; // 20% less transparent per copy
        const textElements = [];

        // Utility function to create a time delay
        const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        // --- 1. Create Initial Text Elements ---
        // We only need 4 elements for the 4-line stack
        for (let i = 0; i < numVisibleCopies; i++) {
            const div = document.createElement('div');
            div.textContent = textToAnimate;
            div.classList.add('ghost-text');
            div.style.zIndex = numVisibleCopies - i; 
            
            // Start all elements hidden and at the top position
            div.style.opacity = 0;
            div.style.transform = `translateY(0vh)`;

            animationContainer.appendChild(div);
            textElements.push(div);
        }

        // --- 2. Animation Logic (Sequential Step) ---
        async function startAnimationSequence() {
            while (true) {
                // 1. Sequentially reveal the lines with a 500ms delay
                for (let i = 0; i < numVisibleCopies; i++) {
                    const element = textElements[i];
                    
                    // Vertical position (8vh separation for non-overlap)
                    const verticalOffset = i * 16; 
                    element.style.transform = `translateY(${verticalOffset}vh)`;
                    
                    // Opacity: 100%, 80%, 60%, 40% (since i starts at 0)
                    const finalOpacity = Math.max(0, 1 - (opacityDrop * i));
                    element.style.opacity = finalOpacity.toFixed(2);
                    
                    // Wait 0.5 seconds before showing the next line
                    await delay(500); 
                }

                // 2. Pause when the full stack is visible for 1 second
                await delay(1000); 

                // 3. Reset all lines instantly (hidden, at the top)
                textElements.forEach(element => {
                    element.style.opacity = 0;
                    element.style.transform = `translateY(0vh)`; 
                });
                
                // 4. Pause briefly before starting the sequence again
                await delay(500);
            }
        }

        // --- 3. Start the Loop ---
        window.onload = startAnimationSequence;
    </script>
</body>
</html>
