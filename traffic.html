<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logo Spatial Traffic</title>
    <style>
        body {
            background-color: #FFFFFF; /* #050505; */
            margin: 0;
            overflow: hidden; /* Prevents scrollbars from appearing */
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>

    <canvas id="trafficCanvas"></canvas>

    <script>
        const canvas = document.getElementById('trafficCanvas');
        const ctx = canvas.getContext('2d');

        // Make canvas fill the entire screen
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Ensure canvas resizes if the window resizes
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // The image we will use for the particles
        const logoImg = new Image();
        logoImg.src = 'logo-complete.png';

        // --- THE PARTICLE CLASS ---
        class LogoParticle {
            constructor() {
                this.reset();
                // Randomize starting X so they don't all start at the edge on load
                this.x = Math.random() * canvas.width; 
            }

            reset() {
                // Z-Index (Depth): 1 is very close, 5 is very far away
                this.z = (Math.random() * 4) + 1; 

                // Size is inversely proportional to Z (further = smaller)
                this.baseSize = 200; // Base size of the logo
                this.size = this.baseSize / this.z;

                // Opacity: Further away = more faded/atmospheric
                this.opacity = 1.2 - (this.z / 5); 

                // Start off-screen to the left or right randomly
                this.direction = Math.random() > 0.5 ? 1 : -1;
                this.x = this.direction === 1 ? -this.size : canvas.width + this.size;
                
                // Random vertical position
                this.y = Math.random() * canvas.height;

                // Speed based on Z (Closer = Faster parallax)
                this.speed = ((Math.random() * 2) + 1) / this.z;

                // Behavior Type: 'vehicular' (straight) or 'biological' (wavy)
                this.type = Math.random() > 0.3 ? 'vehicular' : 'biological';
                
                // For biological paths: unique wave properties
                this.waveAngle = Math.random() * Math.PI * 2;
                this.waveSpeed = (Math.random() * 0.05) + 0.01;
                this.waveAmplitude = (Math.random() * 2) + 0.5;

                // Color tint (Hue rotate angle 0-360)
                this.hue = Math.floor(Math.random() * 360);
            }

            update() {
                // Move horizontally
                this.x += (this.speed * this.direction);

                // If biological, bob up and down
                if (this.type === 'biological') {
                    this.waveAngle += this.waveSpeed;
                    this.y += Math.sin(this.waveAngle) * this.waveAmplitude;
                }

                // If it goes completely off screen, reset it to flow through again!
                if ((this.direction === 1 && this.x > canvas.width) || 
                    (this.direction === -1 && this.x < -this.size)) {
                    this.reset();
                    // Force start off-screen
                    this.x = this.direction === 1 ? -this.size : canvas.width + this.size; 
                }
            }

            draw() {
                ctx.globalAlpha = this.opacity;
                // Modern canvas trick: Apply random hue rotations instantly
                ctx.filter = `hue-rotate(${this.hue}deg) saturate(150%)`; 
                
                // Draw the logo centered on its x,y coordinates
                ctx.drawImage(logoImg, this.x - this.size/2, this.y - this.size/2, this.size, this.size);
            }
        }

        // --- THE ENGINE ---
        const particles = [];
        const particleCount = 45; // How much "traffic" do you want?

        // Wait for the image to load before starting
        logoImg.onload = () => {
            // Create our fleet of logos
            for (let i = 0; i < particleCount; i++) {
                particles.push(new LogoParticle());
            }
            animate();
        };

        function animate() {
            // Clear the screen with a very faint trail effect (motion blur)
            ctx.globalAlpha = 1.0;
            ctx.filter = 'none'; // Reset filters for the background
            ctx.fillStyle = 'rgba(5, 5, 5, 0.4)'; 
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Sort particles by Z-index so smaller/distant ones are drawn FIRST (behind)
            particles.sort((a, b) => b.z - a.z);

            // Update and draw each particle
            particles.forEach(p => {
                p.update();
                p.draw();
            });

            requestAnimationFrame(animate);
        }
    </script>
</body>
</html>
